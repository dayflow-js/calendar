# 侧边栏插件

侧边栏插件为 Day Flow 日历添加日历管理侧边栏。包含用于日期导航的迷你日历、带可见性切换的日历列表，以及完整的日历 CRUD 操作（创建、重命名、更改颜色、合并、删除、导入/导出）。

## 安装

安装插件包：

```bash copy
npm install @dayflow/plugin-sidebar
# or
pnpm add @dayflow/plugin-sidebar
```

## 使用

```tsx copy
import { useCalendarApp, DayFlowCalendar } from '@dayflow/core';
import { createSidebarPlugin } from '@dayflow/plugin-sidebar';

function MyCalendar() {
  const calendar = useCalendarApp({
    views: [/* 视图 */],
    plugins: [
      createSidebarPlugin({
        // 可选配置
      })
    ]
  });

  return <DayFlowCalendar calendar={calendar} />;
}
```

## 配置

| 属性 | 类型 | 默认值 | 说明 |
| :--- | :--- | :--- | :--- |
| `width` | `number \| string` | `undefined` | 侧边栏宽度（如 `280` 或 `'20rem'`） |
| `initialCollapsed` | `boolean` | `false` | 是否以折叠状态启动侧边栏 |
| `createCalendarMode` | `'inline' \| 'modal'` | `'inline'` | 创建日历表单的显示方式 |
| `colorPickerMode` | `'blossom' \| 'default'` | `'default'` | 使用的颜色选择器组件 |
| `renderCalendarContextMenu` | `(calendar, onClose) => TNode` | `undefined` | 日历项的自定义右键菜单渲染器 |
| `renderCreateCalendarDialog` | `(props) => TNode` | `undefined` | 自定义创建日历对话框渲染器 |

## 功能

侧边栏提供以下内置功能：

- **迷你日历** - 用于快速日期导航的紧凑月视图
- **日历列表** - 通过彩色复选框切换各个日历的可见性
- **创建日历** - 使用自定义名称和颜色添加新日历
- **重命名 / 更改颜色** - 右键点击日历以重命名或更改颜色
- **合并日历** - 将一个日历的所有事件移动到另一个日历
- **删除日历** - 带确认步骤的日历删除（也可先合并）
- **导入 / 导出** - 导入 `.ics` 文件或将日历导出为 `.ics`

## 自定义右键菜单

可以替换日历项的默认右键菜单：

```tsx copy
createSidebarPlugin({
  renderCalendarContextMenu: (calendar, onClose) => (
    <div>
      <button onClick={() => { /* 自定义操作 */ onClose(); }}>
        {calendar.name} 的自定义操作
      </button>
    </div>
  )
})
```

## 自定义创建日历对话框

可以替换默认的创建日历对话框：

```tsx copy
createSidebarPlugin({
  renderCreateCalendarDialog: ({ onSave, onCancel }) => (
    <MyCustomDialog onSave={onSave} onCancel={onCancel} />
  )
})
```
