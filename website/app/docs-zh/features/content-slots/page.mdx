# 内容插槽 (Content Slots)

DayFlow 采用了基于插槽的架构，允许您直接从所使用的框架（React、Vue 等）中注入自定义 UI 组件到核心日历引擎中。

这是通过 `ContentSlot` 机制实现的。虽然核心引擎为大多数 UI 元素提供了默认实现（使用 Preact），但您可以覆盖它们以符合您的应用设计或使用特定的第三方库。

## 工作原理

1. **核心定义插槽**：在 `@dayflow/core` 内部，某些 UI 区域被包装在 `ContentSlot` 中。每个插槽都有一个 `generatorName`（生成器名称）和 `generatorArgs`（生成器参数）。
2. **适配器桥接插槽**：框架适配器（`@dayflow/react`, `@dayflow/vue`）会订阅这些插槽。
3. **您提供实现**：您将组件或渲染函数传递给 `DayFlowCalendar` 组件。适配器随后会将您的组件以 Portal（传送门）的形式渲染到核心定义的精确位置。

## 可用插槽

| 生成器名称 | 描述 | 参数 |
| :--- | :--- | :--- |
| `eventContent` | 日历事件卡片的内部内容。 | `{ event, isAllDay, isMobile }` |
| `eventDetailContent` | 点击事件时弹出的面板/详情内容。 | `{ event, position, onClose }` |
| `colorPicker` | 侧边栏中使用的小型颜色选择器。 | `{ color, onChange, variant: 'sketch' }` |
| `colorPickerWrapper` | 对话框中使用功能完整的颜色选择器。 | `{ color, onChange, onAccept, onCancel, variant: 'photoshop' }` |
| `headerContent` | 日历头部（Header）的自定义内容。 | `{ view, date, ... }` |
| `titleBarSlot` | 侧边栏标题栏中的额外内容。 | `{ isCollapsed, toggleCollapsed }` |

## 示例：注入自定义颜色选择器

默认情况下，DayFlow 使用内置的 `BlossomColorPicker`。如果您更喜欢使用 `react-color` 或 `vue-color` 等库，可以使用 `colorPicker` 插槽进行注入。

### React 示例

安装 `react-color`:
```bash
npm install react-color
```

注入到 `DayFlowCalendar`:

```tsx
import { DayFlowCalendar } from '@dayflow/react';
import { SketchPicker, PhotoshopPicker } from 'react-color';

function MyCalendar() {
  return (
    <DayFlowCalendar
      app={app}
      colorPicker={(args) => (
        <SketchPicker
          color={args.color}
          onChange={(color) => args.onChange({ hex: color.hex })}
          width="220px"
        />
      )}
      colorPickerWrapper={(args) => (
        <PhotoshopPicker
          color={args.color}
          onChange={(color) => args.onChange({ hex: color.hex })}
          onAccept={() => args.onAccept?.()}
          onCancel={() => args.onCancel?.()}
        />
      )}
    />
  );
}
```

### Vue 示例

安装 `vue-color`:
```bash
npm install vue-color
```

使用插槽注入:

```vue
<template>
  <DayFlowCalendar :app="app">
    <template #colorPicker="args">
      <Sketch
        :value="args.color"
        @input="(val) => args.onChange({ hex: val.hex })"
      />
    </template>
    
    <template #colorPickerWrapper="args">
      <Photoshop
        :value="args.color"
        @input="(val) => args.onChange({ hex: val.hex })"
        @ok="args.onAccept"
        @cancel="args.onCancel"
      />
    </template>
  </DayFlowCalendar>
</template>

<script setup>
import { DayFlowCalendar } from '@dayflow/vue';
import { Sketch, Photoshop } from 'vue-color';
</script>
```

## 此方法的优势

- **纯净的依赖**：核心包保持轻量，不会强制要求您使用特定的 UI 库。
- **完全控制**：通过 `generatorArgs` 您可以访问所有内部数据，但渲染内容完全由您决定。
- **框架原生**：您可以使用与应用其他部分相同的框架编写自定义组件。
